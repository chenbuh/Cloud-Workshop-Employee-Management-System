# 薪资条 PDF 批量生成与邮件分发系统 (Payroll PDF & Email System)

## 1. 模块概述
本模块实现了企业薪资发放的“最后一公里”自动化。通过将核算后的薪资数据动态转换为 PDF 格式，并结合 SMTP 协议自动点对点发送给员工私人邮箱，实现了薪资发放的私密性与高效性。

## 2. 核心功能
- **批量 PDF 转换**：基于 iText 引擎，将 HTML 格式的薪资模板动态填充数据并转换为高保真的 PDF 文档。
- **自动化邮件发放**：整合 Spring Mail，支持一键将选中的薪资条作为附件发送至员工绑定的电子邮箱。
- **状态追踪**：发送成功后，系统会自动更新该记录为“已发放”状态，并记录发放流水。
- **临时文件清理**：系统在邮件发送完成后会自动删除生成的临时 PDF 文件，确保服务器不留存敏感薪资数据。

## 3. 技术栈
- **后端引擎**：`itext7` (PDF 处理), `spring-boot-starter-mail` (邮件传输)。
- **渲染模板**：内嵌式 HTML CSS 模板，支持表格排版、正负色（红色表示扣款，绿色表示实发）渲染。
- **前端交互**：Naive UI `DataTable` 多选模式 + 异步处理状态反馈。

## 4. 使用流程
1. **生成工资单**：首先在薪资管理页面点击“生成本月工资单”。
2. **勾选记录**：在清单中勾选准备发放的员工记录（已发放记录会自动禁用勾选）。
3. **一键发送**：点击“批量发送薪资条”，系统将依次执行：`生成PDF` -> `构造邮件` -> `投递邮件` -> `标记更新`。

## 5. 配置说明
管理员需在 `application.yml` 中配置企业级 SMTP 服务器信息（如 QQ 企业邮箱、阿里邮箱或自建邮箱系统）：
```yaml
spring:
  mail:
    host: smtp.example.com
    username: payroll@company.com
    password: your_secure_password
```
