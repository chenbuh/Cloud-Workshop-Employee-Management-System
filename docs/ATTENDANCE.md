# 考勤与审批模块功能说明

## 1. 模块概述
考勤与审批模块是系统核心功能之一，旨在解决企业员工日常考勤打卡、工时统计以及请假、加班等流程的在线审批需求。本模块分为员工端（打卡、发起申请）和管理端（考勤统计、审批处理）。

## 2. 功能特性

### 2.1 智能考勤 (Attendance)
- **实时打卡**: 支持员工在工作台进行上班/下班打卡。
- **状态识别**: 系统自动根据打卡时间判定正常、迟到、早退等状态。
- **防作弊**: 记录打卡时的 IP 地址，支持后续扩展地理位置校验。
- **个人考勤月历**: 员工可查看自己当月及历史的每日考勤记录。

### 2.2 流程审批 (Approval)
- **多类型申请**: 支持事假、病假、年假、加班等多种类型的申请。
- **可视化流程**: 申请记录状态一目了然（待处理、已通过、已驳回）。
- **审批管理**: 管理员/负责人可对申请进行审批操作（批准/驳回）。

### 2.3 管理统计 (Management)
- **全员考勤查询**: 管理员可按日期范围、部门、员工筛选考勤明细。
- **工时计算**: 自动计算每日工作时长。
- **异常高亮**: 迟到、早退、缺勤记录会有状态标签高亮显示。

## 3. 数据模型

### 3.1 考勤记录表 (sys_attendance)
| 字段名 | 类型 | 说明 |
|Ref|Type|Desc|
|:---|:---|:---|
| user_id | BIGINT | 员工ID |
| work_date | DATE | 工作日期 |
| clock_in_time | DATETIME | 上班打卡时间 |
| clock_out_time | DATETIME | 下班打卡时间 |
| status | INT | 0:缺勤, 1:正常, 2:迟到, 3:早退 |
| ip_address | VARCHAR | 打卡IP地址 |

### 3.2 请假/加班申请表 (sys_leave)
| 字段名 | 类型 | 说明 |
|:---|:---|:---|
| user_id | BIGINT | 申请人ID |
| leave_type | VARCHAR | 类型 (事假/病假/加班等) |
| start_time | DATETIME | 开始时间 |
| end_time | DATETIME | 结束时间 |
| reason | VARCHAR | 申请理由 |
| status | INT | 0:待审批, 1:已通过, 2:已驳回 |

## 4. 页面组成

### 4.1 员工端
- **AttendanceView.vue**: 考勤签到页面，包含大尺寸打卡按钮和个人历史记录。
- **ApprovalView.vue**: 流程中心，可以发起申请并查看申请历史。

### 4.2 管理端
- **AttendanceManagement.vue**: 考勤统计报表，供HR或管理员查询全员考勤状况。
- **ApprovalView.vue**: (复用) 管理员视角下可进行审批操作。

## 5. 待办/计划
- [ ] 接入钉钉/飞书等第三方考勤数据同步。
- [ ] 支持排班设置（目前默认为朝九晚六）。
- [ ] 补卡申请流程。
