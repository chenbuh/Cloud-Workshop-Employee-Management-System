# 请假/审批管理功能 (Leave Management)

## 概述
请假与审批管理模块主要用于员工提交请假申请，以及管理员/审批通过或驳回申请。

## 功能特性
1.  **提交申请** (用户):
    - 支持多种请假类型：事假、病假、年假、加班。
    - 选择起止时间，自动计算时长。
    - 填写请假理由。

2.  **查看申请列表** (用户/管理员):
    - **用户**: 只能查看自己提交的申请记录。
    - **管理员**: 可以查看所有员工的申请记录，并可以看到申请人的姓名和部门信息。
    - 列表包含：姓名、部门、申请类型、时间、状态等信息。

3.  **审批操作** (管理员):
    - 对"待处理"的申请进行"批准"或"驳回"操作。
    - 审批后系统会自动发送通知给申请人。

## 技术实现

### 后端
- **Controller**: `LeaveController`
    - `POST /apply`: 提交申请。
    - `GET /list`: 获取申请列表。
        - 权限控制：拥有 `system:leave:list` 权限的用户（管理员）可查看所有记录；否则仅返回当前登录用户的记录。
        - 数据增强：使用 `SysLeaveMapper.selectLeavePageWithEmployee` 关联查询员工姓名和部门信息。
    - `PUT /approve`: 审批需改状态。

- **Mapper**: `SysLeaveMapper`
    - 新增 `selectLeavePageWithEmployee` 方法，执行多表关联查询 (`sys_leave` LEFT JOIN `emp_profile` LEFT JOIN `sys_dept`)。

### 前端
- **视图**: `ApprovalView.vue`
    - 展示审批列表，列显示申请人姓名、部门（管理员可见）。
    - 状态筛选：全部、待处理、已通过、已驳回。
    - 弹窗显示详情及审批操作按钮。

## 权限说明
- **普通用户**: 仅需登录权限。
- **管理员**: 需要 `system:leave:list` 权限以查看所有人的申请。审批操作需要相应权限（目前代码共用接口，后续可细化）。

## 数据字典
- **状态 (status)**:
    - 0: 待审批
    - 1: 已通过
    - 2: 已驳回
