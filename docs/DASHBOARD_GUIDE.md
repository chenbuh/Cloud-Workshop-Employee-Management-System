# 智慧仪表盘 (Dashboard) 指南

## 功能概览
仪表盘是系统的核心数据统计与展示中心，采用玻璃拟态设计，提供以下关键指标和趋势分析：

### 1. 核心指标卡片
- **总员工数**: 统计状态为“在职”和“试用”的员工总数。
- **本月入职**: 统计当前自然月内入职的员工数量。
- **待办审批**: 统计当前登录用户待处理的审批申请。
- **月度预支出**: 基于当前月份已生成的薪资发放记录，预估公司总薪资支出。

### 2. 员工增长趋势 (Line Chart)
- **展示逻辑**: 展示公司自成立以来的累计员工人数变化趋势。
- **累计计算**: 系统会自动回溯所有历史录入的员工入职时间，计算每一时间点的累计总人数，从而形成平滑的增长曲线。
- **时间维度**: 支持切换查看“近7天”、“近30天”、“近半年”以及“近一年”的趋势。
- **注意**: 若某段时间内没有新入职员工，趋势线将保持平直，反映出人力规模的稳定状态。

### 3. 部门人数分布 (Doughnut Chart)
- 展示当前在职员工在各个部门（包含子部门）的分布比例。

### 4. 企业文化动态
- 集成了系统公告功能，点击可查看公告详情（支持 Markdown 渲染）。

### 5. 近期入职纪念
- 展示最近 30 天内迎来入职周年纪念的员工。

---

## 最近更新 (2026-02-02)

### 故障修复
1. **修复趋势图不显示问题**:
   - **原因分析**: 原逻辑仅统计选定时间段（如近180天）内的“新入职”人数，若该时间段内无新员工录入，后端返回空数据集，导致图表无法渲染。
   - **优化方案**: 将统计逻辑改为“累计增长趋势”。无论选定时间段是否有新员工，都会基于历史数据计算出该时间点的累计总人数，确保图表始终有数据呈现。
2. **增强后端健壮性**:
   - 修复了后端在转换 MyBatis 统计结果时，因 `SUM OVER` 函数返回 `BigDecimal` 类型而可能导致的 `ClassCastException` 崩溃问题。

### 数据优化
- 对演示数据进行了入职时间调整，使其在“员工增长趋势”图表中呈现出梯度上升的视觉效果。
