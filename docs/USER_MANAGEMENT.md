# 用户管理文档

## 1. 默认账号信息

系统默认管理员账号已更新，详情如下：

| 账号 | 密码 | 权限范围 | 说明 |
|------|------|----------|------|
| admin | admin123 | 全局所有权限 | 超级管理员账号，拥有系统所有功能的访问及操作权限 |

> **注意**：原有的 `chen` 账号已被删除。

## 2. 权限机制

系统采用 **RBAC (Role-Based Access Control)** 基于角色的访问控制模型：
- **用户 (User)**：登录系统的个体。
- **角色 (Role)**：一组权限的集合。
- **菜单/权限 (Menu/Permission)**：具体的功能点或操作权限。

### 2.1 管理员权限获取方式
目前 `admin` 账号通过 `sys_user_menu` 直接关联了系统中所有的菜单 ID，确保其能够访问所有模块。

## 3. 密码安全

- 系统后端使用 **BCrypt** 加密算法存储密码。
- **自动升级机制**：对于从旧系统迁移或手动插入的明文密码（如 `admin123`），系统在用户首次成功登录时会自动将其升级为加密后的 Hash 值存储。

## 5. 个人中心 (Profile Center)

系统为每个用户提供了独立的**个人中心**页面 (`ProfileView.vue`)，用于管理个人职业资料和账号安全。

### 5.1 主要功能
- **职业档案**: 展示个人入职天数、部门、职位等基本信息。
- **动态头像**: 点击头像区域可直接从本地上传并预览新头像，系统自动同步全局。
- **资料编辑**: 支持在线修改昵称、联系电话、邮箱及性别，修改后实时同步至本地缓存及侧边栏。
- **成长历程**: 自动汇总入职、晋升、项目里程碑等时间轴事件。
- **技能矩阵**: 通过动态雷达图展示个人的技术深度、协作能力等核心竞争力。
- **安全中心**: 
  - 集成**密码修改**功能，包含旧密码验证逻辑。
  - 查看登录 IP、登录历史。
  - 提供一键安全退出操作。

### 5.2 访问方式
点击侧边栏左下角的用户头像或昵称区域，即可快速跳转至个人中心。

---

## 6. 维护记录

- **2026-02-04: 内部沟通稳定性增强**
  - **时序优化**: 修复了 `InternalChat` 在初始化时因本地存储 (LocalStorage) 读取过快导致的 `Invalid user ID` 错误。改用 `watch` 监听 UserStore，确保用户信息加载后才建立连接。
  - **状态治理**: 在 `ChatStore` 中实现了 `closeWebSocket` 逻辑，规范了用户登出时的连接清理流程。
- **2026-02-04: 重要优化与配置订正**
  - **文件上传**: 修正了 `application.yml` 的层级错误，确保系统全局上传限制提升至 **10MB** 确认生效。
- **2026-02-04: 个人中心功能完善与进阶实现**
  - **后端扩展**: 在 `SysUserController` 中新增 `updateProfile` 接口，结合 Sa-Token 实现安全的个人信息异步更新。
  - **头像系统**: 集成 `FileController` 的文件上传能力，实现点击预览、自动上传并更新全局头像的完整链路。
  - **安全增强**: 
    - 实现个人中心内的**密码修改**模态框，增加新旧密码校验及强制登出逻辑。
    - 添加安全退出快捷入口。
  - **交互优化**: 完善了资料编辑 Modal 的数据回显与双向绑定，确保 Pinia Store 与 LocalStorage 的数据实时一致。
  - **视觉提升**: 为头像上传增加了悬浮文本提示，优化了弹窗的背景过滤效果。
- **2026-02-04: 个人中心功能初步实现** (详细记录见上方)
- **2026-02-04: WebSocket 连接异常修复**
- **2026-02-03: 项目结构清理与文档完善**
